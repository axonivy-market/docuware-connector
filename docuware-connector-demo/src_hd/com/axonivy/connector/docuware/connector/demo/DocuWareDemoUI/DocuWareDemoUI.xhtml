<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition template="/layouts/frame-10.xhtml">
		<ui:define name="title">#{ivy.cms.co('/Dialogs/com/axonivy/connector/docuware/connector/demo/DocuWareDemoUI/Title')}</ui:define>
		<ui:define name="content">

			<h3>#{ivy.cms.co('/Dialogs/com/axonivy/connector/docuware/connector/demo/DocuWareDemoUI/ContentTitle',
				[data.fileCabinet.name])}</h3>

			<h:form id="form">
				<p:dataTable id="filesTable" var="document"
					value="#{data.documents}" showGridlines="true"
					resizableColumns="true" resizeMode="fit" paginator="true" rows="10"
					paginatorPosition="bottom" rowsPerPageTemplate="10,25,50"
					rowKey="#{document.id}"
					emptyMessage="#{ivy.cms.co('/Labels/NoRecordsFound')}">
					<p:column headerText="Id" width="30" filterBy="#{document.id}"
						filterMatchMode="contains">
						<h:outputText value="#{document.id}" />
					</p:column>

					<p:column headerText="Content type"
						filterBy="#{document.contentType}" filterMatchMode="contains">
						<h:outputText value="#{document.contentType}" />
					</p:column>

					<p:column headerText="Title" filterBy="#{document.title}"
						filterMatchMode="contains">
						<h:outputText value="#{document.title}" />
					</p:column>
					<p:column headerText="Action" width="150">
						<div class="action-column">
							<p:commandButton icon="pi pi-eye" title="View Document"
								actionListener="#{docuWareDemoUIBean.buildDocumentUrl(document.id, data.fileCabinet.id)}"
								oncomplete="PF('viewDocumentDialog').show()"
								update=":form:viewDocumentDialog" />
							<p:commandButton icon="pi pi-pencil" title="Edit Index Fields"
								actionListener="#{logic.onClickEditDocument(document.id)}"
								oncomplete="PF('editIndexFieldsDialog').show()"
								update=":form:editIndexFieldsDialog" />
							<p:commandButton icon="pi pi-trash" title="Delete Document"
								update=":form:filesTable"
								actionListener="#{logic.deleteDocument(document.id)}">
								<p:confirm header="Delete Document"
									message="Are you sure you want to delete this document?"
									icon="fa fa-exclamation-triangle" />
							</p:commandButton>
						</div>
					</p:column>
				</p:dataTable>
				<br />
				<div class="command-btns">
					<p:commandButton id="cancel"
						actionListener="#{ivyWorkflowView.cancel()}" process="@this"
						value="Cancel" />
				</div>
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					responsive="true" width="350">
					<p:commandButton value="No" type="button"
						styleClass="ui-confirmdialog-no ui-button-flat" />
					<p:commandButton value="Yes" type="button"
						styleClass="ui-confirmdialog-yes" />
				</p:confirmDialog>
				<p:dialog id="viewDocumentDialog" widgetVar="viewDocumentDialog"
					modal="true" resizable="false" header="Document Preview"
					width="90vw" height="80vh">
					<iframe src="#{docuWareDemoUIBean.documentUrl}" width="100%"
						height="99%" class="document-viewer"></iframe>
				</p:dialog>
				<p:dialog id="editIndexFieldsDialog"
					widgetVar="editIndexFieldsDialog" modal="true" resizable="false"
					header="Edit Document Index Fields" width="90vw" height="80vh">
					<ic:com.axonivy.connector.docuware.connector.demo.component.UpdateDocumentFields
						documentId="#{data.documentId}"
						fileCabinetId="#{data.fileCabinet.id}"
						documentProperties="#{data.properties}" />
				</p:dialog>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>

</html>